# MindMOOC å¯åŠ¨æŒ‡å—

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯ (Vue3)                         â”‚
â”‚                   http://localhost:8080                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Gateway (ç«¯å£ 80)                       â”‚
â”‚                 JWT è®¤è¯ + è·¯ç”±è½¬å‘                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Business Serviceâ”‚    â”‚   Flask AI       â”‚
â”‚   (ç«¯å£ 10010)   â”‚â—„â”€â”€â”€â”¤   (ç«¯å£ 10020)    â”‚
â”‚  Spring Boot     â”‚    â”‚   Python Flask   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MySQL 8.0      â”‚    â”‚   Nacos          â”‚
â”‚   (ç«¯å£ 3306)    â”‚    â”‚   (ç«¯å£ 8848)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ5 æ­¥éª¤ï¼‰

### æ­¥éª¤ 1: å¯åŠ¨ Nacos

```bash
cd nacos/bin

# Windows
.\startup.cmd -m standalone

# Linux/Mac
sh startup.sh -m standalone
```

âœ… è®¿é—®: http://localhost:8848/nacos (ç”¨æˆ·å/å¯†ç : nacos/nacos)

### æ­¥éª¤ 2: åˆå§‹åŒ–æ•°æ®åº“

```bash
# è¿æ¥ MySQL
mysql -u root -p

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
source G:\work\GraduationProject\code\MindMooc\backend\database\init.sql

# æˆ–æ‰§è¡Œå¢é‡æ›´æ–°ï¼ˆå¦‚æœè¡¨å·²å­˜åœ¨ï¼‰
source G:\work\GraduationProject\code\MindMooc\backend\database\incremental-update.sql
```

âœ… æ•°æ®åº“ `mindmooc` å·²åˆ›å»ºï¼Œæµ‹è¯•ç”¨æˆ·: testuser/123456

### æ­¥éª¤ 3: å¯åŠ¨ Flask AI æœåŠ¡

```bash
cd ai

# Windows - åŒå‡»æˆ–è¿è¡Œ
start.bat

# Linux/Mac
chmod +x start.sh
./start.sh
```

âœ… è®¿é—®: http://localhost:10020/health

### æ­¥éª¤ 4: å¯åŠ¨ Spring Boot Gateway

ä½¿ç”¨ IDE (IDEA/Eclipse) è¿è¡Œï¼š

```
gateway/src/main/java/com/mindmooc/gateway/GatewayMainApplication.java
```

æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼š

```bash
cd gateway
mvn spring-boot:run
```

âœ… è®¿é—®: http://localhost:80

### æ­¥éª¤ 5: å¯åŠ¨ Spring Boot Business Service

ä½¿ç”¨ IDE è¿è¡Œï¼š

```
services/business-service/src/main/java/com/mindmooc/business/BusinessMainApplication.java
```

æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼š

```bash
cd services/business-service
mvn spring-boot:run
```

âœ… è®¿é—®: http://localhost:10010

## âœ… éªŒè¯å¯åŠ¨

### 1. æ£€æŸ¥æ‰€æœ‰æœåŠ¡

| æœåŠ¡       | åœ°å€                            | çŠ¶æ€æ£€æŸ¥                       |
| -------- | ----------------------------- | -------------------------- |
| Nacos    | http://localhost:8848/nacos   | ç™»å½•æŸ¥çœ‹æœåŠ¡åˆ—è¡¨                   |
| Flask AI | http://localhost:10020/health | è¿”å› `{"status": "healthy"}` |
| Gateway  | http://localhost/             | -                          |
| Business | http://localhost:10010        | -                          |
| MySQL    | localhost:3306                | å¯è¿æ¥                        |

### 2. æµ‹è¯•

#### æµ‹è¯•ç™»å½•æ¥å£

```bash
curl -X POST http://localhost/api/users/login \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"123456"}'
```

æˆåŠŸå“åº”:

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9...",
    "user": {
      "id": "test-user-id-001",
      "username": "testuser"
    }
  }
}
```

#### æµ‹è¯•ç”¨æˆ·æ³¨å†Œ

```bash
curl -X POST http://localhost/api/users/register \
  -H "Content-Type: application/json" \
  -d "{\"username\":\"newuser\",\"email\":\"new@test.com\",\"password\":\"123456\"}"
```

#### æµ‹è¯•è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€è¦ Tokenï¼‰

```bash
# æ›¿æ¢ <your_token> ä¸ºç™»å½•è·å¾—çš„ token
curl -X GET http://localhost/api/users/me \
  -H "Authorization: Bearer <your_token>"
```

### 3. æµ‹è¯•å®Œæ•´æµç¨‹

å‚è€ƒ `ai/test_api.py` æµ‹è¯•è„šæœ¬ï¼š

```bash
cd ai/tests
python test_api.py
```

## ğŸ“ ç«¯å£å ç”¨æƒ…å†µ

| ç«¯å£    | æœåŠ¡               | è¯´æ˜      |
| ----- | ---------------- | ------- |
| 80    | Gateway          | API ç½‘å…³  |
| 10020 | Flask AI         | AI è§†é¢‘å¤„ç† |
| 8848  | Nacos            | æœåŠ¡æ³¨å†Œä¸­å¿ƒ  |
| 3306  | MySQL            | æ•°æ®åº“     |
| 10010 | Business Service | ä¸šåŠ¡æœåŠ¡    |

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ç«¯å£è¢«å ç”¨

```bash
# Windows - æŸ¥æ‰¾å¹¶å…³é—­å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :8848
taskkill /PID <è¿›ç¨‹ID> /F

# Linux/Mac
lsof -i :8848
kill -9 <è¿›ç¨‹ID>
```

### Q2: Nacos æœåŠ¡åˆ—è¡¨ä¸ºç©º

- æ£€æŸ¥ `application.yml` ä¸­çš„ Nacos åœ°å€
- ç¡®ä¿ Nacos å·²å¯åŠ¨
- æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—

### Q3: Gateway æ— æ³•è½¬å‘è¯·æ±‚

- æ£€æŸ¥ Gateway æ˜¯å¦æˆåŠŸæ³¨å†Œåˆ° Nacos
- æŸ¥çœ‹ `gateway/src/main/resources/application-route.yml` è·¯ç”±é…ç½®
- æ£€æŸ¥ Business Service æ˜¯å¦å¯åŠ¨

### Q4: Flask å›è°ƒå¤±è´¥

- ç¡®ä¿ Spring Boot Business Service å·²å¯åŠ¨
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- æŸ¥çœ‹ Flask æ—¥å¿—: `ai/logs/ai-service.log`

### Q5: æ•°æ®åº“è¿æ¥å¤±è´¥

- æ£€æŸ¥ MySQL æ˜¯å¦å¯åŠ¨
- éªŒè¯ç”¨æˆ·åå¯†ç 
- æ£€æŸ¥æ•°æ®åº“ `mindmooc` æ˜¯å¦å·²åˆ›å»º

## ğŸ“‚ é¡¹ç›®ç»“æ„é€Ÿè§ˆ

```
backend/
â”œâ”€â”€ gateway/                    # API ç½‘å…³ (ç«¯å£ 80)
â”œâ”€â”€ services/
â”‚   â””â”€â”€ business-service/       # ä¸šåŠ¡æœåŠ¡ (ç«¯å£ 10010)
â”œâ”€â”€ ai/                         # AI æœåŠ¡ (ç«¯å£ 10020) â­ æ–°å¢
â”‚   â”œâ”€â”€ app.py                 # Flask ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ start.bat              # Windows å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start.sh               # Linux/Mac å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ test_api.py            # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ README.md              # AI æœåŠ¡æ–‡æ¡£
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ init.sql               # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â””â”€â”€ incremental-update.sql # å¢é‡æ›´æ–°
â””â”€â”€ README-BACKEND.md          # åç«¯å®Œæ•´æ–‡æ¡£
```

## ğŸ“ è·å–å¸®åŠ©

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
   
   - Spring Boot: æ§åˆ¶å°è¾“å‡º
   - Flask: `ai/logs/ai-service.log`
   - Nacos: `nacos/logs/`

2. æ£€æŸ¥é…ç½®æ–‡ä»¶
   
   - Spring Boot: `services/business-service/src/main/resources/application.yml`
   - Gateway: `gateway/src/main/resources/application.yml`
   - Flask: `ai/.env`

3. è¿è¡Œæµ‹è¯•è„šæœ¬
   
   ```bash
   cd ai
   python test_api.py
   ```
